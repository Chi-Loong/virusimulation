<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A virus simulation, visualized">
    <meta name="author" content="Chi-Loong (www.vslashr.com)">
    <meta name="google-site-verification" content="..." />

    <meta property="og:title" content="A virus simulation, visualized">
    <meta property="og:type" content="website">
    <meta property="og:url" content="http://showcase.vslashr.com/virus">
    <meta property="og:image" content="http://showcase.vslashr.com/virus/assets/img/virus_opengraph.jpg">
    <meta property="og:image:width" content="1119" />
    <meta property="og:image:height" content="600" />
    <meta property="og:description" content="A virus simulation, visualized">

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@vslashr" />
    <meta name="twitter:creator" content="@chiloong" />
        
    <title>A virus simulation, visualized</title>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/index.css">
</head>
<body>

<div class="toggle-button">
    <div class="menu-bar menu-bar-top"></div>
    <div class="menu-bar menu-bar-middle"></div>
    <div class="menu-bar menu-bar-bottom"></div>
</div>
<div class="menu-wrap">
    <div class="menu-sidebar">
        <ul class="menu">
            <li><a class="scrolllink" data-target="#baseline_introduction">Baseline: Intro</a></li>
            <li><a class="scrolllink" data-target="#baseline_model">Baseline: Model</a></li>
            <li><a class="scrolllink" data-target="#baseline_analysis">Baseline: Analysis</a></li>
            <li><a href="viruschokepoint.html#chokepoint_model">Chokepoint: Model</a></li>
            <li><a href="viruschokepoint.html#chokepoint_analysis">Chokepoint: Analysis</a></li>
            <li class="menu-center"><a href="http://www.vslashr.com/" traget="_blank"><img id="logo" src="assets/img/VslashR_logo_white.svg"/></a></li>
        </ul>
    </div>
</div>

<div class="windowheight">
    <div class="centerpane">
        <svg viewBox="0 0 500 550" xmlns="http://www.w3.org/2000/svg" id="virusAnimation">
          <g id="background" fill="#eb5569">
            <path d="M491.938 229.544c1.77 22.9-14.34 43.23-35.97 45.4-16.56 1.66-31.54-7.81-38.46-22.6l-19.63 1.73-14.82 7.15c-3.39 1.63-5.67 4.87-6.19 8.59-1.4 10.03-3.94 19.69-7.47 28.87-1.2 3.11-.99 6.58.64 9.48l5.28 9.44 14.68 9.85c7.74-2.96 16.75-2.25 24.16 2.72 12.56 8.43 15.57 25.78 6.23 37.99-8.04 10.52-22.99 13.41-34.37 6.65-7.25-4.3-11.63-11.44-12.7-19.07l-16.27-10.91-10.24-1.25c-3.52-.43-7.02.78-9.58 3.23-8.64 8.23-18.4 15.3-29.01 20.96-3.57 1.9-5.86 5.55-6.11 9.58l-1.3 20.74 6.44 25.55c10.96 3.06 20.02 11.75 23 23.57 4.5 17.87-6.6 36-24.7 40.03-16.33 3.64-33.08-5.88-38.27-21.79-4.04-12.42-.33-25.26 8.21-33.65l-6.47-25.7-9.99-16.06c-2.68-4.31-7.42-6.86-12.5-6.85h-.08c-8.75 0-17.31-.87-25.59-2.5-4.93-.98-10.02.58-13.48 4.23l-13.2 13.93-14.78 30.66c3.46 7.03 3.77 15.52.11 23.13-6.58 13.64-23.36 19.06-36.77 11.52-11.48-6.47-16.45-20.75-11.45-32.95 3.41-8.32 10.48-13.88 18.48-15.74l14.87-30.86 2.92-20.71c.53-3.82-.93-7.67-3.93-10.09a132.898 132.898 0 01-29.9-34.27c-1.97-3.25-5.51-5.22-9.31-5.25l-20.68-.2-22.64 7.12c-1.59 14.08-11.23 26.59-25.61 31.11-19.32 6.08-39.9-4.54-46.17-23.74-6.27-19.19 4.32-40.18 23.49-46.52 13.42-4.44 27.52-.75 37.06 8.32l24.03-7.56 17.55-12.51c2.61-1.85 4-4.95 3.74-8.13-.29-3.53-.44-7.09-.44-10.69 0-19.56 4.3-38.13 11.98-54.83a9.002 9.002 0 00-.09-7.69l-5.2-10.63-14.11-10.65c-7.9 2.53-16.85 1.32-23.97-4.05-12.08-9.12-14.12-26.61-4.12-38.28 8.61-10.05 23.7-12.11 34.69-4.73 7 4.7 10.98 12.06 11.62 19.74l15.64 11.8 15.76 2.81a132.013 132.013 0 0139.53-25.33l3.7-22.48-4.67-23.22c-13.82-3.56-25.04-14.15-28.06-28.27-4.26-19.95 9.45-39.38 30.63-43.39 21.17-4.01 41.79 8.9 46.05 28.85 3.19 14.93-3.68 29.56-16.22 37.66l4.41 21.9 10.83 17.28a3.871 3.871 0 003.28 1.81h.02c24.8 0 48.02 6.9 67.85 18.88 1.09.65 2.43.74 3.58.2l16.96-7.86 19.8-21.42c-1.19-7.68 1-15.82 6.69-21.97 10.28-11.11 27.88-11.39 38.5-.28 9.31 9.75 9.67 25.3.83 35.48-5.72 6.59-13.93 9.63-21.95 9.03l-19.8 21.42-6.43 17.3c-.45 1.2-.25 2.54.5 3.58a131.013 131.013 0 0118.34 35.48c1.19 3.52 3.99 6.26 7.57 7.27l16.1 4.51 20.92-1.85c5.13-14.79 17.94-25.98 33.67-27.56 21.63-2.17 40.6 14.64 42.36 37.54z" fill="#eb5569"/>
            <circle cx="246.448" cy="251.494" fill="#f58a97" r="97.52"/>
            <circle cx="216.514" cy="224.6" r="25.189"/>
            <circle cx="236.734" cy="302.839" r="17.145"/>
            <circle cx="290.57" cy="251.494" r="14.397"/>
            <path d="M178.652 251.494c0-48.807 35.859-89.244 82.664-96.401a98.371 98.371 0 00-14.869-1.119c-53.86 0-97.52 43.66-97.52 97.52s43.66 97.52 97.52 97.52c5.053 0 10.016-.384 14.862-1.125-46.804-7.158-82.657-47.588-82.657-96.395z" fill="#f07281"/>
          </g>
          <g id="outline" stroke-width="2" stroke="#000" fill="none">
            <path d="M499.421 228.968c-1.043-13.54-7.164-25.639-17.233-34.069-9.426-7.891-21.271-11.569-33.356-10.357-16.482 1.653-30.999 12.435-38.155 27.957l-14.979 1.323-14.784-4.144c-1.149-.322-2.076-1.232-2.48-2.434a138.745 138.745 0 00-18.241-35.905l5.232-14.067 16.513-17.86c9.392-.315 18.126-4.455 24.389-11.674 11.333-13.063 10.862-33.082-1.074-45.575-6.551-6.856-15.375-10.614-24.813-10.513-9.319.076-18.29 4.042-24.614 10.883-6.195 6.7-9.367 15.439-8.973 24.435l-16.515 17.863-13.838 6.419a138.818 138.818 0 00-68.052-18.938l-9.048-14.43-3.191-15.857c12.713-10.395 18.653-26.541 15.256-42.447-5.098-23.869-29.677-39.417-54.786-34.654-12.642 2.396-23.398 9.426-30.287 19.792-6.453 9.711-8.682 21.264-6.275 32.53 3.208 15.021 14.097 27.138 28.911 32.544l3.525 17.518-2.804 17.075a138.92 138.92 0 00-35.104 22.57l-10.372-1.848-11.72-8.842c-1.675-8.901-6.813-16.737-14.447-21.859-14.247-9.56-33.405-6.945-44.563 6.082-6.168 7.202-9.004 16.343-7.985 25.737a34.027 34.027 0 0013.284 23.406c7.69 5.801 17.47 8.014 26.831 6.215l9.821 7.409 4.405 9.014c.195.399.2.859.015 1.261-8.401 18.267-12.66 37.769-12.66 57.965 0 3.738.155 7.538.46 11.294.047.58-.182 1.11-.614 1.417l-16.585 11.817-18.93 5.955a44.382 44.382 0 00-41.138-7.034 26.08 26.08 0 00-.84.298l-.234.086a7.501 7.501 0 005.083 14.113l.351-.128c.118-.043.236-.088.353-.127a29.409 29.409 0 0129.544 6.63 7.499 7.499 0 007.418 1.718l24.028-7.559a7.503 7.503 0 002.102-1.046l17.552-12.506c4.706-3.352 7.335-9.043 6.861-14.852a125.16 125.16 0 01-.411-10.077c0-18.017 3.798-35.411 11.289-51.698a16.413 16.413 0 00-.166-14.113l-5.194-10.628a7.494 7.494 0 00-2.221-2.694l-14.119-10.652a7.498 7.498 0 00-6.804-1.155 18.935 18.935 0 01-17.162-2.898c-4.207-3.173-6.836-7.808-7.405-13.05-.568-5.236 1.018-10.336 4.465-14.361 6.11-7.133 17.009-8.62 24.813-3.384 4.811 3.229 7.847 8.383 8.33 14.143a7.498 7.498 0 002.957 5.361l15.638 11.798a7.495 7.495 0 003.201 1.396l15.756 2.808a7.494 7.494 0 006.417-1.886c10.977-10.186 23.523-18.224 37.292-23.891a7.498 7.498 0 004.546-5.72l3.692-22.48a7.511 7.511 0 00-.048-2.695l-4.671-23.215a7.498 7.498 0 00-5.481-5.783c-11.598-2.988-20.254-11.641-22.59-22.58-1.556-7.284-.1-14.776 4.1-21.096 4.635-6.975 11.947-11.719 20.588-13.357 17.173-3.252 33.914 7.085 37.323 23.049 2.441 11.432-2.645 23.127-12.958 29.795a7.5 7.5 0 00-3.28 7.778l4.407 21.9c.179.888.517 1.736.998 2.504l10.833 17.281c2.092 3.337 5.691 5.329 9.647 5.329h.004c22.574 0 44.696 6.152 63.977 17.792a11.308 11.308 0 0010.611.591l16.957-7.866a7.506 7.506 0 002.351-1.712l19.8-21.416a7.498 7.498 0 001.905-6.239c-.889-5.744.857-11.478 4.79-15.731 3.577-3.869 8.451-6.023 13.723-6.067 5.252-.001 10.184 2.043 13.845 5.876 6.645 6.955 6.904 18.104.589 25.382-3.96 4.564-9.69 6.92-15.722 6.467a7.496 7.496 0 00-6.07 2.388l-19.8 21.416a7.483 7.483 0 00-1.523 2.477l-6.437 17.308a11.292 11.292 0 001.472 10.604 123.845 123.845 0 0117.298 33.457c1.987 5.913 6.716 10.436 12.651 12.099l16.103 4.513a7.502 7.502 0 002.684.249l20.913-1.847a7.5 7.5 0 006.426-5.011c4.33-12.473 15.061-21.328 27.338-22.559 8.029-.806 15.927 1.657 22.231 6.934 6.947 5.816 11.176 14.24 11.906 23.719.482 6.264-.65 12.554-3.274 18.191a7.5 7.5 0 003.634 9.965 7.5 7.5 0 009.965-3.634c3.705-7.97 5.306-16.848 4.627-25.676z"/>
            <path d="M461.674 266.105a30.411 30.411 0 01-6.455 1.374c-12.979 1.299-25.11-5.888-30.917-18.315a7.499 7.499 0 00-7.455-4.295l-19.632 1.734a7.496 7.496 0 00-2.599.716l-14.819 7.149c-5.614 2.708-9.488 8.058-10.361 14.31a123.306 123.306 0 01-7.04 27.212c-2.012 5.225-1.614 10.998 1.093 15.837l5.278 9.438a7.487 7.487 0 002.368 2.567l14.688 9.854a7.502 7.502 0 006.858.777 18.935 18.935 0 0117.296 1.943c4.375 2.935 7.258 7.417 8.116 12.619.857 5.196-.443 10.377-3.663 14.587-5.706 7.462-16.504 9.55-24.587 4.753-4.982-2.957-8.3-7.936-9.101-13.66a7.498 7.498 0 00-3.25-5.188l-16.268-10.914a7.49 7.49 0 00-3.273-1.217l-10.239-1.245c-5.727-.698-11.437 1.213-15.662 5.24a124.848 124.848 0 01-27.367 19.779c-5.792 3.088-9.648 9.114-10.062 15.724l-1.299 20.744c-.048.773.023 1.55.213 2.301l6.437 25.546a7.498 7.498 0 005.252 5.39c8.734 2.443 15.534 9.411 17.745 18.184 1.683 6.68.619 13.59-2.998 19.456-3.614 5.863-9.316 9.918-16.055 11.419-12.563 2.8-25.527-4.579-29.507-16.796-3.006-9.229-.578-19.178 6.335-25.966a7.499 7.499 0 002.018-7.184l-6.477-25.702a7.497 7.497 0 00-.903-2.127l-9.985-16.061c-4.047-6.511-11.097-10.396-18.937-10.396h-.016c-8.11 0-16.229-.793-24.133-2.357-7.534-1.492-15.153.914-20.381 6.431l-13.202 13.932a7.526 7.526 0 00-1.313 1.902l-14.778 30.661a7.5 7.5 0 00.027 6.568c2.589 5.26 2.619 11.295.082 16.559-2.29 4.751-6.324 8.239-11.358 9.822-5.03 1.582-10.347 1.019-14.971-1.583-8.133-4.577-11.73-14.929-8.19-23.566 2.361-5.759 7.185-9.869 13.236-11.277a7.5 7.5 0 005.057-4.048l14.874-30.858a7.484 7.484 0 00.67-2.211l2.914-20.716c.903-6.417-1.637-12.916-6.627-16.962a124.806 124.806 0 01-28.208-32.33c-3.276-5.405-9.276-8.801-15.66-8.861l-20.68-.197a7.426 7.426 0 00-2.322.345l-22.642 7.123a7.502 7.502 0 00-5.203 6.316c-1.302 11.571-9.312 21.303-20.407 24.793-15.301 4.814-31.807-3.672-36.788-18.919-1.98-6.061-1.916-12.493.187-18.601a7.5 7.5 0 00-4.651-9.533 7.499 7.499 0 00-9.533 4.651c-3.173 9.22-3.264 18.951-.262 28.141 6.094 18.653 23.605 30.606 42.325 30.605a44 44 0 0013.223-2.036c15.15-4.769 26.488-17.233 29.977-32.486l17.146-5.394 19.492.185c1.23.012 2.37.639 2.974 1.637a139.764 139.764 0 0031.588 36.207c.927.751 1.395 1.986 1.221 3.222l-2.751 19.559-12.923 26.813a34.027 34.027 0 00-20.102 19.141c-6.466 15.772-.141 33.97 14.713 42.328 8.272 4.656 17.801 5.658 26.825 2.82a34.025 34.025 0 0020.373-17.619c3.996-8.291 4.446-17.641 1.361-26.177l12.801-26.558 12.398-13.083c1.667-1.76 4.126-2.52 6.581-2.034a139.879 139.879 0 0027.132 2.643h.006c2.542 0 4.831 1.239 6.121 3.316l9.368 15.068 5.208 20.667c-8.672 10.584-11.405 24.777-7.088 38.032 5.44 16.703 21.397 27.736 38.459 27.735 2.84 0 5.713-.306 8.571-.942 10.726-2.389 19.805-8.848 25.563-18.189 5.76-9.344 7.455-20.351 4.773-30.992-3.153-12.514-12.16-22.72-23.989-27.511l-5.159-20.476 1.226-19.576c.091-1.455.915-2.768 2.149-3.426a139.913 139.913 0 0030.657-22.155c.967-.921 2.244-1.36 3.504-1.208l8.457 1.028 12.192 8.18c2.165 8.794 7.73 16.333 15.636 21.025 14.755 8.755 33.738 5.084 44.157-8.542 5.761-7.533 8.086-16.816 6.547-26.14a34.028 34.028 0 00-14.56-22.634c-7.999-5.366-17.887-7.033-27.134-4.719l-10.216-6.854-4.401-7.87c-.523-.936-.591-2.075-.187-3.125a138.33 138.33 0 007.897-30.527c.178-1.275.935-2.35 2.023-2.875l13.585-6.554 13.337-1.178c9.27 15.343 25.811 23.931 43.479 22.158a45.447 45.447 0 009.647-2.05 7.5 7.5 0 004.779-9.469 7.5 7.5 0 00-9.469-4.782z"/>
          </g>
        </svg>
        <h1>A virus simulation, visualized</h1>
        <p><i>Chi-Loong, Updated 1st May 2020</i></p>
    </div>
</div>    
    
<section id="baseline_introduction">
    <div class="container">
        <h2>Introduction</h2>
        <p>Since the Covid19 pandemic upended billions of lives around the world, we have had some really gorgeous simulations / visualizations to explain how an infection spreads.</p>
        <p>Here are some links to posts and stories that you might have seen:</p>
        <ul>
        <li><p><a href="https://www.washingtonpost.com/graphics/2020/world/corona-simulator/" target="_blank">Washington Post: Why outbreaks like coronavirus spread exponentially, and how to “flatten the curve”</a> (by Harry Stevens)</p></li>
        <li><p><a href="https://www.youtube.com/watch?v=gxAaO2rsdIs" target="_blank">Simulating an epidemic</a> (by 3Blue1Brown, Grant Sanderson)</p></li>
        <li><p><a href="https://meltingasphalt.com/interactive/outbreak/" target="_blank">Outbreak</a> (by Kevin Simler)</p></li>
        </ul>
        <p>Being stuck at home in Singapore on a lockdown (which was just extended to another month), I wanted a project to occupy my time.</p>
        <p>And I had a different take on simulating and visualizing a virus outbreak in a town.</p>
        <p>Instead of people moving about randomly, I felt that giving people a routine home to work to home cycle seemed more realistic to me. Was there a way I could show this, and what insights could we draw?</p>
        <p>So I coded up my own model for fun that people can play and explore.</p>
    </div>
    <div class="container">
        <h2>Warning Caveats</h2>
        <p>Please note that my toy model is just that: A fun thought experiment.</p>
        <p>It is highly simplified and the simulation rules do not represent real life at all with all its complexities.</p>
        <p>You simplify things to communicate ideas, but this is in no way a real epidemological model.</p>
        <p>I do not have a background in epidemology and neither am I a doctor. So please defer to these experts, like we all should. If I have gotten anything wrong, it is entirely my own fault. Do let me know if you spot any errors!</p>
        <p>What I do is visualization work to communicate stories and ideas. And I see code as a tool and way to share my ideas.</p>
    </div>
</section>

<section id="baseline_model">
    <div class="container">
        <h2>Baseline Model</h2>
        <p>Here’s our very simplified base toy model.</p>
        <ul>
        <li><p>Let’s assume that we have a small town with about 150 people that lives in it.</p></li>
        <li><p>In this town, there are 50 homes (<img src="assets/img/house.svg" width="25">) and 30 workplaces (<img src="assets/img/factory.svg" width="25">). The people in town are randomly assigned to one permanent home and one permanent workplace.</p></li>
        <li><p>Everybody has a schedule – they either are at work from 9am to 5pm, or they are at home.</p></li>
        <li><p>The simulation starts with one sick individual on Day 0 at 12 midnight (and thus everybody is at home). Everyone is at home till 9am in the morning, at which everyone goes to work.</p></li>
        <li><p>Every person is represented by a dot. If you’re healthy you’re black. Else, if you’re sick and infectious, you’re <span style="color:#f00">red</span>.</p></li>
        <li><p>Every hour, every sick person has a chance to infect every other non-sick person at the same location. Thus when you have more sick people at a location, the risk for healthy folks get compounded.</p></li>
        <li><p>Travel from location to location is instant and no one gets infected during movement.</p></li>
        </ul>
        <p>Based on this model, let’s try running the simulation and see how it works!</p>
        <p><i>Please run these simulations / visualization on a modern browser. Also, although this will work for mobiles, this will look a lot better for desktops and bigger tablets, because a bigger canvas allows for the town simulation to be bigger.</i></p>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-3 text-center">
                    <h4>Simulation Parameters</h4>
                    <form>
                        Number of people: 
                        <select class="form-control" id="controls_people">
                          <option>50</option>
                          <option selected>150</option>
                          <option>300</option>
                          <option>500</option>
                        </select>
                        
                        Number of homes: 
                        <select class="form-control" id="controls_homes">
                          <option>10</option>
                          <option>30</option>
                          <option selected>50</option>
                          <option>100</option>
                          <option>150</option>
                        </select>
                        
                        Number of workplaces: 
                        <select class="form-control" id="controls_workplaces">
                          <option>10</option>
                          <option>20</option>
                          <option selected>30</option>
                          <option>60</option>
                          <option>100</option>
                        </select>
                        
                        Number of days to run simulation: 
                        <select class="form-control" id="controls_days">
                          <option>1</option>
                          <option>2</option>
                          <option selected>3</option>
                          <option>4</option>
                          <option>5</option>
                          <option>6</option>
                          <option>7</option>
                        </select>
                          
                        Infection chance: 
                        <select class="form-control" id="controls_infection_chance">
                          <option value="0.01">1%</option>
                          <option value="0.015">1.5%</option>
                          <option value="0.02" selected>2%</option>
                          <option value="0.025">2.5%</option>
                          <option value="0.03">3%</option>
                        </select>
                        
                        Simulation Speed: 
                        <select class="form-control" id="controls_speed">
                          <option value="750">Slow</option>
                          <option value="500">Medium</option>
                          <option value="250" selected>Fast</option>
                          <option value="100">Blazing</option>
                        </select>

                        <button type="button" class="btn btn-danger" id="run_simulation">Run Simulation</button>
                        
                    </form>
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="chart">
                    </svg>
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title">Simulation Results</h4>
                            <p class="small-text" id="timetext"></p>
                            <p class="small-text" id="shifttext"></p>
                            <p class="small-text" id="sicktext"></p>
                        </div>
                    </div>
            </div>
            <div class="col-lg-9 text-center">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="town">
                </svg>
            </div>
        </div>
    </div>
    <div class="container">
        <h2>Insights</h2>
        <p>Our model here is rather simple, and it is just about infection. It does not take into account any resistance or anything like that. But even in this barebones state the visualization can help with intuitions about viral spread.</p>
        <p>You might notice a few things if you run the simulation a few times:</p>
        <ul>
        <li><p>You might get lucky and the number of sick is really low after several days. Perhaps you got a good randomized start, and the sick individual lived alone, and the workplace he or she worked in had very few employees.</p></li>
        <li><p>Once you start having a small base of people who are sick, it likely and quickly starts to explode as people move around and spread.</p></li>
        <li><p>The number of homes and workplaces gives you an idea of how spread out a population is. The more spread out a population is, the less chance they have to interact.</p></li>
        <li><p>If you group a bunch of people at one same location, it is likely to become a vector of spread, and one infection will likely quickly multiply at that location and spread it all throughout the town.</p></li>
        </ul>
        <p>The last point may be a a common sense intuition, but becomes clear when visualized.</p>
        <p>For example, in Singapore our current lockdown situation is due to Covid19 spread in migrant workers who were squeezed into a few dormitories. For them it is extremely difficult to isolate, and thus when the <a href="https://foreignpolicy.com/2020/04/21/singapore-coronavirus-response-snag/" target="_blank">virus started to circulate, it exploded</a>.</p>
        <p>Another example: Having one main employer in town like a <a href="https://www.channelnewsasia.com/news/world/5000-meat-food-processing-workers-covid-19-coronavirus-12672062" target="_blank">meat-packing factory</a>. If you get one case in town, it is likely to spread.</p>
        <p>You can see these intuitions better by putting <i>more people in less homes and workplaces</i> when you run the simulation. One red dot quickly becomes a bunch of angry red dots at chokepoints.</p>
    </div>
</section>

<section id="baseline_analysis">
    <div class="container">
        <h2>Simulation vs real-life</h2>
        <p>Each simulation run gets outcomes based on chance.</p>
        <p>If you get lucky in your run, you might not get that much infection. Conversely, you could be unlucky and see the whole town get sick before the simulation time even ran out.</p>
        <p>Actually this is somewhat similar to real-life: Luck does play a part in epidemics on who and where it strikes, and how it grows and dies in any particular place.</p>
        <p>In real life, we only live in this one timeline, and we only see the case results after infections have occured. If we got lucky, we may think that the virus is not as serious or contagious.</p>
        <p>The trouble is that whilst your town (or you individually) may not be as affected, the overall trend is that many other towns (and other people) would have gotten an unlucky dice roll.</p>
        <p>Our trouble as humans is that we tend to only see <i>localized events</i>, and mistake it for the entire <i>trend</i>.</p>
        <p>Our cognitive biases makes it hard to fight long-term, complex challenges like Covid19 (looking like this is going to be more and more likely) or climate change because we evolved to pay attention to short-term immediate problems.</p>
        <p>In any case, in simulation land, because it is a thought experiment, we can do something that cannot be done in real-life: We can rerun the simulation thousands of times, and plot the results to get the most probable outcomes.</p>
        <p>If we keep everything the same except for changing one parameter, we can get useful conclusions.</p>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-6 text-center">
                <h3>30 workplaces</h3>
                <img class="histogram" src="assets/img/basemodel_1_30work.jpg">
            </div>
            <div class="col-lg-6 text-center">
                <h3>20 workplaces</h3>
                <img class="histogram" src="assets/img/basemodel_1_20work.jpg">
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-body">
                        <p><b>Parameters: </b>150 people town, 50 homes, 3 days simulation time, 2% infection rate.</p>
                        <p>Everything is the same <i>except</i> for number of workplaces.</p>
                        <p>Both scenario simulations run 10,000 times.</p>
                        <p> I considered making this interactive for readers, but dropped the idea as it is compute heavy and takes time to run.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <p>What you are looking at is the number of infections at the end of 3 days plotted in 2 histograms (bar chart) after 10,000 simulations for each scenario. The only change is the number of workplaces.</p>
        <p>You can see that the average number of infections is less in the 30 workplaces scenario compared to the 20 workplaces one, even without calculating the exact mean / median / variance.</p>
    </div>
    <div class="container">
        <h2>Statistics and reproducibility</h2>
        <p>Feel free to skip this section if you're not into statistics or code as it delves into some fun technical ideas.</p>
        <p>A quick detour. If you plot many independent random variables (due to the <a href="https://en.wikipedia.org/wiki/Law_of_large_numbers" target="_blank">Law of Large Numbers</a>), you will get a nice bell curve due to the <a href="https://en.wikipedia.org/wiki/Central_limit_theorem" target="_blank">Central Limit Theorem</a>. Just like here!</p>
        <p>This, in essence, is why data polling is such a powerful tool and why it works to tell us about the sampled population.</p>
        <p>But hold on, you might ask. If I run your simulation with randomized data, I will get a different result, right?</p>
        <p>Correct. This is why for all these charts, for <i>reproducibility</i>, it is run based on a specific psuedo number generator (PRNG) algorithm running on a specific hash.</p>
        <p>The default javascript Math.random() does not provide for this. The random numbers generated here are based on the SFC2 algorithm (<a href="https://github.com/bryc/code/blob/master/jshash/PRNGs.md" target="_blank">here is a great list</a>).</p>
        <p>In any case, if you have an interest in reproducing these results, you can checkout and play with the code in the <a href="https://github.com/Chi-Loong/virusimulation" target="_blank">github repository</a>.</p>
    </div>
    <div class="container">
        <h2>Model Exploration</h2>
        <p>Now that we have a baseline model to work with, let’s explore some other scenarios.</p>
        <p>This article is a work in progress and I will add more models over time.</p>
        <p>For example, how do quarantine breakers affect infection rates? Under a lockdown, how does the percentage of essential businesses affect infection?</p>
        <p>What if people have different types of schedules? Or if social activities are allowed, and people are allowed to mix around at social places after social distancing is in effect? Can we model this?</p>
    </div>
    <div class="container">
        <div class="text-center">
            <a href="viruschokepoint.html"><button type="button" class="btn btn-dark">Scenario: One chokepoint for an hour</button></a>
        </div>
    </div>
</section>

<script src="assets/js/chance.min.js"></script>
<script src="assets/js/jquery-3.1.1.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/d3.min.js"></script>
<script src="assets/js/TweenMax-2.1.3.min.js"></script>
<script src="assets/js/ScrollToPlugin.min.js"></script>
<script src="assets/js/DrawSVGPlugin.min.js"></script>
<script src="assets/js/menu.js"></script>
<script src="assets/js/virusbase.js"></script>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38155188-1']);
    _gaq.push(['_trackPageview']);
    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
    
</body>
</html>